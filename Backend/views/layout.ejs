<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title><%= title %> | Portfolio</title>
    <meta
      name="description"
      content="Professional portfolio showcasing web development projects and skills"
    />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <style>
      :root {
        --primary-color: #0f172a;
        --secondary-color: #0ea5e9;
        --accent-color: #f97316;
        --text-dark: #0f172a;
        --text-light: #64748b;
        --bg-light: #f1f5f9;
        --bg-dark: #0f172a;
        --success: #10b981;
        --warning: #f59e0b;
        --danger: #ef4444;
        --white: #ffffff;
        --gray-100: #f8fafc;
        --gray-200: #e2e8f0;
        --gray-300: #cbd5e1;
        --gray-400: #94a3b8;
        --gray-500: #64748b;
        --gray-600: #475569;
        --gray-700: #334155;
        --gray-800: #1e293b;
        --gray-900: #0f172a;
        --transition: all 0.3s ease;
        --shadow-sm: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
        --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        --radius-sm: 0.25rem;
        --radius: 0.5rem;
        --radius-lg: 0.75rem;
        --radius-xl: 1rem;
        --radius-full: 9999px;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Inter", sans-serif;
        line-height: 1.6;
        color: var(--text-dark);
        background-color: var(--white);
        overflow-x: hidden;
        padding-top: 80px; /* Account for fixed navbar */
      }

      h1, h2, h3, h4, h5, h6 {
        font-family: "Poppins", sans-serif;
        font-weight: 700;
        line-height: 1.3;
        letter-spacing: -0.025em;
      }

      /* Enhanced Navigation */
      .navbar {
        background: rgba(15, 23, 42, 0.95);
        backdrop-filter: blur(10px);
        padding: 1rem 0;
        box-shadow: var(--shadow-lg);
        transition: var(--transition);
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 1030;
      }

      .navbar.scrolled {
        padding: 0.5rem 0;
        background: rgba(15, 23, 42, 0.98);
      }

      .navbar-brand {
        font-weight: 800;
        font-size: 1.75rem;
        color: white !important;
        display: flex;
        align-items: center;
      }

      .navbar-brand i {
        margin-right: 0.5rem;
        color: var(--secondary-color);
      }

      .navbar-nav .nav-link {
        color: rgba(255, 255, 255, 0.85) !important;
        font-weight: 500;
        margin: 0 0.25rem;
        padding: 0.5rem 1rem !important;
        border-radius: var(--radius-full);
        transition: var(--transition);
        position: relative;
        overflow: hidden;
      }

      .navbar-nav .nav-link:hover,
      .navbar-nav .nav-link.active {
        color: white !important;
        background: rgba(14, 165, 233, 0.15);
        transform: translateY(-2px);
      }

      .navbar-nav .nav-link::before {
        content: "";
        position: absolute;
        bottom: 0;
        left: 50%;
        width: 0;
        height: 3px;
        background: var(--secondary-color);
        transition: var(--transition);
        transform: translateX(-50%);
      }

      .navbar-nav .nav-link:hover::before,
      .navbar-nav .nav-link.active::before {
        width: 70%;
      }

      /* Mobile menu button */
      .navbar-toggler {
        border: none;
        padding: 0.25rem 0.5rem;
        border-radius: var(--radius);
        background: rgba(255, 255, 255, 0.1);
      }

      .navbar-toggler:focus {
        box-shadow: 0 0 0 0.2rem rgba(14, 165, 233, 0.25);
        outline: none;
      }

      .navbar-toggler-icon {
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%28255, 255, 255, 0.85%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
      }

      /* Enhanced Hero Section */
      .hero {
        background: linear-gradient(135deg, var(--primary-color) 0%, var(--gray-800) 100%);
        color: white;
        padding: 120px 0 80px;
        text-align: center;
        position: relative;
        overflow: hidden;
      }

      .hero::before {
        content: "";
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(circle, rgba(14, 165, 233, 0.1) 0%, transparent 70%);
        animation: rotate 20s linear infinite;
      }

      @keyframes rotate {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }

      .hero h1 {
        font-size: 3.5rem;
        font-weight: 800;
        margin-bottom: 1rem;
        background: linear-gradient(to right, #fff, #94a3b8);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        animation: fadeInUp 0.8s ease;
      }

      .hero p {
        font-size: 1.25rem;
        margin-bottom: 2rem;
        animation: fadeInUp 0.8s ease 0.2s both;
        max-width: 700px;
        margin-left: auto;
        margin-right: auto;
      }

      .btn-custom {
        background: linear-gradient(135deg, var(--secondary-color) 0%, #0284c7 100%);
        color: white;
        padding: 12px 30px;
        border-radius: var(--radius-full);
        text-decoration: none;
        font-weight: 600;
        transition: var(--transition);
        display: inline-flex;
        align-items: center;
        justify-content: center;
        border: none;
        box-shadow: var(--shadow);
        margin: 0.5rem;
      }

      .btn-custom i {
        margin-right: 0.5rem;
      }

      .btn-custom:hover {
        transform: translateY(-3px);
        box-shadow: var(--shadow-lg);
        color: white;
      }

      .btn-custom-outline {
        background: transparent;
        border: 2px solid white;
        color: white;
        padding: 12px 30px;
        border-radius: var(--radius-full);
        text-decoration: none;
        font-weight: 600;
        transition: var(--transition);
        display: inline-flex;
        align-items: center;
        justify-content: center;
        margin: 0.5rem;
      }

      .btn-custom-outline i {
        margin-right: 0.5rem;
      }

      .btn-custom-outline:hover {
        background: white;
        color: var(--primary-color);
        transform: translateY(-3px);
        box-shadow: var(--shadow-lg);
      }

      /* Enhanced Cards */
      .card {
        border: none;
        border-radius: var(--radius-lg);
        box-shadow: var(--shadow);
        transition: var(--transition);
        overflow: hidden;
        background: var(--white);
        height: 100%;
        display: flex;
        flex-direction: column;
      }

      .card:hover {
        transform: translateY(-10px);
        box-shadow: var(--shadow-xl);
      }

      .card-img-top {
        height: 200px;
        object-fit: cover;
      }

      .card-body {
        padding: 1.5rem;
        flex-grow: 1;
        display: flex;
        flex-direction: column;
      }

      .card-title {
        font-weight: 700;
        color: var(--gray-800);
        margin-bottom: 0.75rem;
      }

      .card-text {
        color: var(--gray-600);
        line-height: 1.6;
        flex-grow: 1;
      }

      /* Enhanced Skills */
      .skill-item {
        background: white;
        padding: 2rem;
        border-radius: var(--radius-lg);
        text-align: center;
        box-shadow: var(--shadow);
        transition: var(--transition);
        margin-bottom: 2rem;
        border: 1px solid var(--gray-200);
      }

      .skill-item:hover {
        transform: translateY(-5px);
        box-shadow: var(--shadow-lg);
        border-color: var(--secondary-color);
      }

      .skill-icon {
        font-size: 3rem;
        margin-bottom: 1rem;
        color: var(--secondary-color);
        transition: var(--transition);
      }

      .skill-item:hover .skill-icon {
        transform: scale(1.1);
        color: var(--accent-color);
      }

      .progress {
        height: 10px;
        border-radius: var(--radius-full);
        background: var(--gray-200);
        overflow: hidden;
      }

      .progress-bar {
        border-radius: var(--radius-full);
        background: linear-gradient(90deg, var(--secondary-color) 0%, var(--accent-color) 100%);
        transition: width 1s ease;
      }

      /* Enhanced Footer */
      .footer {
        background: linear-gradient(135deg, var(--primary-color) 0%, var(--gray-800) 100%);
        color: var(--gray-300);
        padding: 3rem 0 1rem;
        margin-top: 5rem;
      }

      .footer h5, .footer h6 {
        color: var(--white);
        margin-bottom: 1.5rem;
      }

      .footer p {
        line-height: 1.8;
      }

      .social-links a {
        color: var(--gray-300);
        font-size: 1.5rem;
        margin: 0 0.5rem;
        transition: var(--transition);
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 45px;
        height: 45px;
        border-radius: var(--radius-full);
        background: rgba(255, 255, 255, 0.1);
      }

      .social-links a:hover {
        color: var(--white);
        background: var(--secondary-color);
        transform: translateY(-5px);
        box-shadow: var(--shadow);
      }

      /* Enhanced Animations */
      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .animate-on-scroll {
        opacity: 0;
        transform: translateY(30px);
        transition: all 0.6s cubic-bezier(0.22, 0.61, 0.36, 1);
      }

      .animate-on-scroll.animated {
        opacity: 1;
        transform: translateY(0);
      }

      /* Enhanced Flash messages */
      .alert {
        border-radius: var(--radius);
        border: none;
        padding: 1rem 1.5rem;
        display: flex;
        align-items: center;
        box-shadow: var(--shadow);
        position: relative;
        margin-bottom: 1rem;
      }

      .alert i {
        font-size: 1.25rem;
        margin-right: 0.75rem;
      }

      .alert-success {
        background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
        color: #166534;
      }

      .alert-danger {
        background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
        color: #991b1b;
      }

      .btn-close {
        position: absolute;
        right: 1rem;
        top: 1rem;
        background: none;
        border: none;
        font-size: 1.5rem;
        opacity: 0.7;
        transition: var(--transition);
      }

      .btn-close:hover {
        opacity: 1;
        transform: rotate(90deg);
      }

      /* Enhanced Form styles */
      .form-control {
        border-radius: var(--radius);
        border: 2px solid var(--gray-200);
        padding: 12px 15px;
        transition: var(--transition);
        background-color: var(--white);
      }

      .form-control:focus {
        border-color: var(--secondary-color);
        box-shadow: 0 0 0 0.2rem rgba(14, 165, 233, 0.25);
        outline: none;
      }

      .form-label {
        font-weight: 600;
        color: var(--gray-700);
        margin-bottom: 0.5rem;
      }

      /* Enhanced section styles */
      .py-5 {
        padding-top: 4rem !important;
        padding-bottom: 4rem !important;
      }

      .bg-light {
        background-color: var(--bg-light) !important;
      }

      .bg-dark-gradient {
        background: linear-gradient(135deg, var(--primary-color) 0%, var(--gray-800) 100%);
      }

      /* Enhanced text styles */
      .text-primary {
        color: var(--secondary-color) !important;
      }

      .text-accent {
        color: var(--accent-color) !important;
      }

      .text-muted {
        color: var(--gray-500) !important;
      }

      .display-4 {
        font-weight: 800;
        letter-spacing: -0.025em;
      }

      .lead {
        font-weight: 400;
        color: var(--gray-600);
      }

      /* Enhanced badge styles */
      .badge {
        padding: 0.5em 0.75em;
        border-radius: var(--radius-full);
        font-weight: 600;
      }

      .badge.bg-secondary {
        background-color: var(--gray-500) !important;
      }

      .badge.bg-light {
        background-color: var(--gray-200) !important;
        color: var(--gray-700) !important;
      }

      /* Enhanced divider styles */
      hr {
        opacity: 0.1;
        margin: 2rem 0;
      }

      /* Back to top button */
      .back-to-top {
        position: fixed;
        bottom: 30px;
        right: 30px;
        width: 50px;
        height: 50px;
        border-radius: var(--radius-full);
        background: var(--secondary-color);
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.25rem;
        box-shadow: var(--shadow-lg);
        transition: var(--transition);
        z-index: 1000;
        opacity: 0;
        visibility: hidden;
      }

      .back-to-top.show {
        opacity: 1;
        visibility: visible;
      }

      .back-to-top:hover {
        transform: translateY(-5px);
        background: var(--accent-color);
      }

      /* Comprehensive Responsive Design */
      /* Extra small devices (phones, less than 576px) */
      @media (max-width: 575.98px) {
        .container {
          padding-right: 1rem;
          padding-left: 1rem;
        }
        
        .hero h1 {
          font-size: 2rem;
        }
        
        .hero p {
          font-size: 1rem;
        }
        
        .btn-custom, .btn-custom-outline {
          padding: 10px 20px;
          font-size: 0.9rem;
          margin: 0.25rem;
        }
        
        .navbar-brand {
          font-size: 1.5rem;
        }
        
        .navbar-nav .nav-link {
          padding: 0.75rem 1rem !important;
          margin: 0.1rem 0;
        }
        
        .py-5 {
          padding-top: 2rem !important;
          padding-bottom: 2rem !important;
        }
        
        .display-4 {
          font-size: 1.75rem;
        }
        
        .lead {
          font-size: 0.9rem;
        }
        
        .btn {
          padding: 0.5rem 1rem;
          font-size: 0.875rem;
        }
        
        .card-img-top {
          height: 150px;
        }
        
        .social-links a {
          width: 35px;
          height: 35px;
          font-size: 1.25rem;
        }
        
        .footer {
          padding: 2rem 0 1rem;
        }
        
        .mt-5.pt-5 {
          padding-top: 4rem !important;
        }
        
        body {
          padding-top: 70px;
        }
        
        .navbar {
          padding: 0.5rem 0;
        }
      }

      /* Small devices (landscape phones, 576px and up) */
      @media (min-width: 576px) and (max-width: 767.98px) {
        .hero h1 {
          font-size: 2.5rem;
        }
        
        .hero p {
          font-size: 1.1rem;
        }
        
        .display-4 {
          font-size: 2rem;
        }
        
        .lead {
          font-size: 1rem;
        }
      }

      /* Medium devices (tablets, 768px and up) */
      @media (min-width: 768px) and (max-width: 991.98px) {
        .hero h1 {
          font-size: 3rem;
        }
        
        .hero p {
          font-size: 1.2rem;
        }
        
        .display-4 {
          font-size: 2.25rem;
        }
        
        .lead {
          font-size: 1.1rem;
        }
      }

      /* Large devices (desktops, 992px and up) */
      @media (min-width: 992px) and (max-width: 1199.98px) {
        .hero h1 {
          font-size: 3.25rem;
        }
        
        .display-4 {
          font-size: 2.5rem;
        }
        
        .lead {
          font-size: 1.15rem;
        }
      }

      /* Extra large devices (large desktops, 1200px and up) */
      @media (min-width: 1200px) {
        .hero h1 {
          font-size: 3.5rem;
        }
        
        .display-4 {
          font-size: 2.75rem;
        }
        
        .lead {
          font-size: 1.25rem;
        }
      }

      /* General responsive improvements */
      @media (max-width: 991.98px) {
        .navbar-nav .nav-link {
          margin: 0.25rem 0;
        }
        
        .d-flex.flex-wrap.justify-content-center {
          flex-direction: column;
          align-items: center;
        }
        
        .gap-3 {
          gap: 1rem;
        }
        
        .text-center.text-md-end {
          text-align: center !important;
        }
        
        .me-3 {
          margin-right: 1rem !important;
        }
        
        .mb-md-0 {
          margin-bottom: 1rem !important;
        }
        
        .rounded-pill {
          border-radius: var(--radius-full) !important;
        }
        
        .shadow-lg {
          box-shadow: var(--shadow) !important;
        }
        
        h1, h2, h3, h4, h5, h6 {
          line-height: 1.3;
        }
        
        .card {
          margin-bottom: 1.5rem;
        }
        
        .footer .row > div {
          margin-bottom: 1.5rem;
          text-align: center;
        }
        
        .footer .social-links {
          justify-content: center;
        }
        
        .mt-5.pt-5 {
          padding-top: 3rem !important;
        }
        
        /* Mobile navbar adjustments */
        .navbar-collapse {
          background: rgba(15, 23, 42, 0.98);
          border-radius: var(--radius);
          margin-top: 0.5rem;
          padding: 1rem;
          box-shadow: var(--shadow-lg);
        }
        
        .navbar-nav {
          align-items: center;
        }
      }

      /* Responsive fixes for specific components */
      @media (max-width: 576px) {
        .d-flex.flex-wrap.justify-content-center.gap-3 {
          flex-direction: column;
          gap: 0.75rem;
        }
        
        .d-flex.gap-2 {
          flex-direction: column;
          gap: 0.5rem;
        }
        
        .d-grid {
          display: block !important;
        }
        
        .btn + .btn {
          margin-top: 0.5rem;
        }
        
        .form-control, .form-select {
          font-size: 1rem;
        }
        
        .input-group {
          flex-direction: column;
        }
        
        .input-group .form-control:not(:first-child) {
          border-left: 2px solid var(--gray-200);
          border-top: none;
          border-radius: 0 0 var(--radius) var(--radius);
        }
        
        .input-group .input-group-text {
          border-radius: var(--radius) var(--radius) 0 0;
          border-right: 2px solid var(--gray-200);
          border-bottom: none;
        }
        
        .alert {
          padding: 0.75rem 1rem;
          font-size: 0.875rem;
        }
        
        .alert i {
          font-size: 1rem;
          margin-right: 0.5rem;
        }
        
        .btn-close {
          top: 0.75rem;
          right: 0.75rem;
          font-size: 1.25rem;
        }
        
        .back-to-top {
          bottom: 20px;
          right: 20px;
          width: 40px;
          height: 40px;
          font-size: 1rem;
        }
      }
    </style>
  </head>
  <body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark">
      <div class="container">
        <a class="navbar-brand" href="/">
          <i class="fas fa-code"></i> Ahmad Arifi
        </a>

        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a
                class="nav-link <%= currentPath === '/' ? 'active' : '' %>"
                href="/"
              >
                <i class="fas fa-home"></i> Home
              </a>
            </li>
            <li class="nav-item">
              <a
                class="nav-link <%= currentPath === '/about' ? 'active' : '' %>"
                href="/about"
              >
                <i class="fas fa-user"></i> About
              </a>
            </li>
            <li class="nav-item">
              <a
                class="nav-link <%= currentPath === '/skills' ? 'active' : '' %>"
                href="/skills"
              >
                <i class="fas fa-chart-bar"></i> Skills
              </a>
            </li>
            <li class="nav-item">
              <a
                class="nav-link <%= currentPath === '/projects' ? 'active' : '' %>"
                href="/projects"
              >
                <i class="fas fa-folder-open"></i> Projects
              </a>
            </li>
            <li class="nav-item">
              <a
                class="nav-link <%= currentPath === '/blog' ? 'active' : '' %>"
                href="/blog"
              >
                <i class="fas fa-blog"></i> Blog
              </a>
            </li>
            <li class="nav-item">
              <a
                class="nav-link <%= currentPath === '/contact' ? 'active' : '' %>"
                href="/contact"
              >
                <i class="fas fa-envelope"></i> Contact
              </a>
            </li>
            <% if (user && user.role === 'admin') { %>
            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                id="adminDropdown"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                <i class="fas fa-user-cog"></i> <%= user.name %>
              </a>
              <ul class="dropdown-menu">
                <li>
                  <a class="dropdown-item" href="/admin"
                    ><i class="fas fa-tachometer-alt"></i> Dashboard</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li>
                  <form action="/admin/logout" method="POST" class="d-inline">
                    <button type="submit" class="dropdown-item text-danger">
                      <i class="fas fa-sign-out-alt"></i> Logout
                    </button>
                  </form>
                </li>
              </ul>
            </li>
            <% } else { %>
            <li class="nav-item">
              <a
                class="nav-link <%= currentPath.startsWith('/admin') ? 'active' : '' %>"
                href="/admin/login"
              >
                <i class="fas fa-sign-in-alt"></i> Admin Login
              </a>
            </li>
            <% } %>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Flash Messages -->
    <% if (messages.success && messages.success.length > 0) { %>
    <div class="container mt-5 pt-5">
      <% messages.success.forEach(function(message) { %>
      <div class="alert alert-success alert-dismissible fade show">
        <i class="fas fa-check-circle"></i> <%= message %>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="alert"
          aria-label="Close"
        ></button>
      </div>
      <% }); %>
    </div>
    <% } %> <% if (messages.error && messages.error.length > 0) { %>
    <div class="container mt-5 pt-5">
      <% messages.error.forEach(function(message) { %>
      <div class="alert alert-danger alert-dismissible fade show">
        <i class="fas fa-exclamation-circle"></i> <%= message %>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="alert"
          aria-label="Close"
        ></button>
      </div>
      <% }); %>
    </div>
    <% } %>

    <!-- Main Content -->
    <main><%- body %></main>

    <!-- Back to Top Button -->
    <a href="#" class="back-to-top">
      <i class="fas fa-arrow-up"></i>
    </a>

    <!-- Footer -->
    <footer class="footer">
      <div class="container">
        <div class="row">
          <div class="col-md-6">
            <h5><i class="fas fa-code"></i> Ahmad Waheb Arifi</h5>
            <p>
              Ahmad Waheb Arifi - Full-stack developer passionate about creating
              amazing web experiences with modern technologies.
            </p>
          </div>
          <div class="col-md-6 text-md-end">
            <h6>Connect with me</h6>
            <div class="social-links">
              <a
                href="https://github.com/AhmadWahebArifi"
                title="GitHub"
                target="_blank"
                ><i class="fab fa-github"></i
              ></a>
              <a
                href="https://linkedin.com/in/AhmadArifi"
                title="LinkedIn"
                target="_blank"
                ><i class="fab fa-linkedin"></i
              ></a>
              <a href="mailto:AhmadWahebArifi@gmail.com" title="Email"
                ><i class="fas fa-envelope"></i
              ></a>
            </div>
          </div>
        </div>
        <hr class="my-4" />
        <div class="row">
          <div class="col-12 text-center">
            <p>
              &copy; <%= new Date().getFullYear() %> Ahmad Waheb Arifi. All
              rights reserved.
            </p>
          </div>
        </div>
      </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Custom JS -->
    <script>
      // Enhanced animate elements on scroll with throttling
      let ticking = false;

      function updateAnimations() {
        const elements = document.querySelectorAll(
          ".animate-on-scroll:not(.animated)"
        );
        const windowHeight = window.innerHeight;

        elements.forEach((element) => {
          const elementTop = element.getBoundingClientRect().top;

          // Trigger animation when element is 15% from the bottom of the viewport
          if (elementTop < windowHeight * 0.85) {
            element.classList.add("animated");
          }
        });

        ticking = false;
      }

      function requestTick() {
        if (!ticking) {
          requestAnimationFrame(updateAnimations);
          ticking = true;
        }
      }

      // Use scroll event with throttling for better performance
      window.addEventListener("scroll", requestTick);
      window.addEventListener("load", updateAnimations);
      window.addEventListener("resize", requestTick);

      // Auto-hide alerts after 5 seconds
      setTimeout(() => {
        const alerts = document.querySelectorAll(".alert");
        alerts.forEach((alert) => {
          if (alert.querySelector(".btn-close")) {
            alert.querySelector(".btn-close").click();
          }
        });
      }, 5000);

      // Navbar scroll effect
      window.addEventListener("scroll", function() {
        const navbar = document.querySelector(".navbar");
        if (window.scrollY > 50) {
          navbar.classList.add("scrolled");
        } else {
          navbar.classList.remove("scrolled");
        }
      });

      // Back to top button
      const backToTopButton = document.querySelector(".back-to-top");
      
      window.addEventListener("scroll", function() {
        if (window.scrollY > 300) {
          backToTopButton.classList.add("show");
        } else {
          backToTopButton.classList.remove("show");
        }
      });

      backToTopButton.addEventListener("click", function(e) {
        e.preventDefault();
        window.scrollTo({
          top: 0,
          behavior: "smooth"
        });
      });

      // Smooth scroll for anchor links
      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function(e) {
          e.preventDefault();
          const target = document.querySelector(this.getAttribute("href"));
          if (target) {
            window.scrollTo({
              top: target.offsetTop - 80,
              behavior: "smooth"
            });
          }
        });
      });

      // Ensure navbar collapse works properly on mobile
      document.addEventListener('DOMContentLoaded', function() {
        const navbarToggler = document.querySelector('.navbar-toggler');
        const navbarCollapse = document.querySelector('.navbar-collapse');
        
        if (navbarToggler && navbarCollapse) {
          navbarToggler.addEventListener('click', function() {
            // This is handled by Bootstrap, but we can add custom behavior if needed
          });
          
          // Close navbar when clicking outside
          document.addEventListener('click', function(event) {
            const isClickInsideNavbar = navbarCollapse.contains(event.target) || navbarToggler.contains(event.target);
            
            if (!isClickInsideNavbar && navbarCollapse.classList.contains('show')) {
              const bsCollapse = new bootstrap.Collapse(navbarCollapse, {
                toggle: false
              });
              bsCollapse.hide();
            }
          });
        }
      });
    </script>
  </body>
</html>